var googleCalEvents=function(){"use strict";var a,b=function(b){var f;a=b;var g="https://www.googleapis.com/calendar/v3/calendars/"+b.calendarAddress+"/events?key="+b.calendarAPI;jQuery.getJSON(g,function(a){f=a.items,f.sort(c).reverse();var m,g=0,h=0,i=[],j=[],k=jQuery(b.upcomingSelector),l=jQuery(b.pastSelector);b.past===!1?b.maxPast=0:-1===b.maxPast&&(b.maxPast=f.length),b.upcoming===!1?b.maxUpcoming=0:-1===b.maxUpcoming&&(b.maxUpcoming=f.length);for(m in f)d(f[m].end.dateTime||f[m].end.date)?g<b.maxPast&&(i.push(f[m]),g++):j.push(f[m]);j.reverse(),g=1;for(m in i)l.append(e(i[m],b.format,b.times,1===g,g===i.length)),g++;for(m in j){if(!(h<b.maxUpcoming))break;k.append(e(j[m],b.format,b.times,0===h,h===j.length-1||h===b.maxUpcoming-1)),h++}0!==k.children().length?($("div").addClass(function(a,b){var c;return"cal"===b&&(c="cal-calendar"),c}),jQuery(b.upcomingHeading).insertBefore(k)):0!==b.maxUpcoming&&jQuery(b.noUpcomingHeading).insertBefore(k),0!==l.children().length?($("div").addClass(function(a,b){var c;return"cal"===b&&(c="cal-calendar"),c}),jQuery(".cal-calendar").insertBefore(l),jQuery(b.pastHeading).insertBefore(l)):0!==b.maxUpcoming&&jQuery(b.noPastHeading).insertBefore(l)})},c=function(a,b){return new Date(a.start.dateTime||a.start.date).getTime()-new Date(b.start.dateTime||b.start.date).getTime()},d=function(a){var b=new Date(a),c=new Date;return c.getTime()>b.getTime()?!0:!1},e=function(a,b,c,d,e){var t,h=void 0!==a.start.date,i=f(a.start.dateTime||a.start.date,h),k=f(a.end.dateTime||a.end.date,h),m=i[1]+1,o=(i[2].toString()+(10>m?"0"+m:m)+(i[0]<10?"0"+i[0]:i[0]),d?"cal-event cal-event-first":e?"cal-event cal-event-last":"cal-event"),p='<div class="'+o+'">',q=a.summary||"",r=a.description||"",s=a.location||"";for(h&&(k=l(k)),t=0;t<b.length;t++)b[t]=b[t].toString(),p="*summary*"===b[t]?p.concat('<div class="cal-summary"><a class="cal-link" href="'+a.htmlLink+'">'+q+"</a></div>"):"*date*"===b[t]?p.concat(g(i,k,h,c)):"*description*"===b[t]?p.concat('<div class="cal-description">'+r+"</div>"):"*location*"===b[t]?p.concat('<div class="cal-location">'+s+"</div>"):"*starttime*"===b[t]&&c&&!h?p.concat(j(i)):"*endtime*"===b[t]&&c&&!h?p.concat(j(k)):p.concat(b[t]);return p+"</div>"},f=function(a,b){var c=a.toString().split("-"),d=b?new Date(c[0],parseInt(c[1])-1,c[2],0,0,0):new Date(a);return[d.getDate(),d.getMonth(),d.getFullYear(),d.getHours(),d.getMinutes(),d.getDay()]},g=function(a,b,c){var d="";return d=a[2]!==b[2]||a[1]!==b[1]||a[0]!==b[0]?h(a,b):i(a,b,c)},h=function(a,b){return'<div class="cal-date"><div class="cal-date-day">'+a[0]+'</div><div class="cal-date-sub"><div class="cal-date-month">'+k(a[1])+'</div><div class="cal-date-year">'+a[2]+'</div></div></div><div class="cal-date-to">-</div><div class="cal-date cal-date-end"><div class="cal-date-day">'+b[0]+'</div><div class="cal-date-sub"><div class="cal-date-month">'+k(b[1])+'</div><div class="cal-date-year">'+b[2]+"</div></div></div>"},i=function(a,b,c){return'<div class="cal-date"><div class="cal-date-day">'+a[0]+'</div><div class="cal-date-sub"><div class="cal-date-month">'+k(a[1])+'</div><div class="cal-date-year">'+a[2]+"</div></div></div>"},j=function(a){var b="AM",c=a[3],d=a[4];return c>=12&&(b="PM",c=c>12?c-12:c),0===c&&(c=12),d=(10>d?"0":"")+d,c+":"+d+b},k=function(a){var b=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];return b[a]},l=function(a){var b=m(a);return b.setTime(b.getTime()-6e4),f(b)},m=function(a){return new Date(a[2],a[1],a[0],a[3],a[4],0)},n=function(a,b){var d,c={};for(d in a)c[d]=a[d];for(d in b)c[d]=b[d];return c};return{init:function(a){var c={calendarAddress:"milan.kacurak@gmail.com",calendarAPI:"AIzaSyCR3-ptjHE-_douJsn8o20oRwkxt-zHStY",past:!0,upcoming:!0,times:!0,maxPast:-1,maxUpcoming:-1,upcomingSelector:"#cal-upcoming",pastSelector:"#cal-past",upcomingHeading:'<div class="cal-header">Upcoming Events</div>',noUpcomingHeading:'<div class="cal-header">There are no events coming up.</div>',pastHeading:'<div class="cal-header">Past Events</div>',noPastHeading:'<div class="cal-header">There are no past events.</div>',format:["*date*","*summary*","*description*","*location*"]};c=n(c,a),b(c)}}}();